/*
 *  progressforms - v1.0.1
 *  JQuery plugin that splits a form into multiple steps with a progress bar
 *  https://github.com/anthony-benavente/progressforms.git
 *
 *  Made by Anthony Benavente
 *  Under MIT License
 */
!function(a,b,c,d){function e(){var b=100/o.length;a(o).each(function(){a(this).css("width",b+"%")})}function f(){var b=a('<ul class="progressBar"></ul>'),c=function(){for(var b=p.find(".progressBar li"),c=0;c<b.length;c++)if(b[c]===this){c>t&&s.clickForward?s.clickVisitedOnly&&a(m[c]).data("previously-validated")?u.goToTab(c):s.clickVisitedOnly||u.goToTab(c):t>c&&s.clickBack&&u.goToTab(c);break}};if(0===s.tabs.length)for(var d=0;d<m.length;d++){var e=a(m[d]).find("legend");s.tabs.push(e?e.html():"")}for(var d=0;d<s.tabs.length;d++){var f=a("<li>").html(s.tabs[d]);0===d&&f.addClass("active"),(s.clickForward||s.clickBack)&&f.click(c),b.append(f)}return b}function g(){var a=s.ui.createNextButton();return a.click(h),a}function h(){var b=s.validateRequired?i(q):!1;if(t+1>=m.length)t--;else if(b)s.callbacks.onValidateRequiredFailed(b);else{a(o[t]).addClass("completed").removeClass("active");var c=a(m[t]);t++,r=a(q),q=a(m[t]),r&&a(r).hide(),a(q).show(),a(o[t]).addClass("active"),a(r).data("previously-validated",!0),s.callbacks.onNext(c,q),t===m.length-1&&s.callbacks.onLastTabEntered()}}function i(b){var c,e=n.find("li")[t].innerHTML,f=a(b).find("[required]"),g=0;for(g=0;g<f.length&&c===d;g++)a(f[g]).is(":visible")&&""===a(f[g]).val()&&(c=a(f[g]));if(!c){var h=a(b).find("[data-required]");for(g=0;g<h.length;g++)if(a(h[g]).is(":visible")){for(var i=parseInt(a(h[g]).attr("data-required")||1),j=0,k=a(h[g]).find('input[type="checkbox"],input[type="radio"]'),l=!1,m=0;m<k.length&&!l;m++)a(k[m]).is(":checked")&&(l=++j==i);!l&&k.length>0&&(c=a(k[0]))}}return c||"function"!=typeof s.validateRequiredFunctions[e]||(c=s.validateRequiredFunctions[e](b)),c}function j(){var a=s.ui.createPrevButton();return a.click(k),a}function k(){if(a(o[t]).removeClass("active"),--t<0)t++;else{a(q).hide();var b=a(q);q=r,r=t>0?a(m[t-1]):d,a(q).show(),a(o[t]).addClass("active"),s.callbacks.onPrev(b,q)}}function l(){for(var b=0;b<m.length;b++){var c=a('<div class="next-prev-bar">');0===b?c.append(g()):b===m.length-1?c.append(j()):(c.append(j()),c.append(g())),a(m[b]).append(c)}}var m,n,o,p,q,r,s,t=0,u={init:function(b){s=a.extend(!0,a.fn.progressforms.defaults,b),p=a(this),m=p.children("fieldset");for(var c=0;c<m.length;c++)0!==c&&a(m[c]).hide();return q=a(m[0]),n=f(),o=n.find("li"),""!==s.ui.progressBarTarget?a(s.ui.progressBarTarget).append(n):p.prepend(n),e(),l(),p.addClass("progressformswrapper"),s.callbacks.onInit(),p},goToTab:function(b){if(b>=0&&b<m.length)if(b>t)for(var c=t;b>c;c++)h();else for(var d=t-1;d>=b;d--)k();else a.error("There is no fieldset at index "+b)},goToTabId:function(b){var c=m.filter(function(){return a(this).attr("id")===b});u.goToTab(m.index(c))}};a.fn.progressforms=function(b){return u[b]?u[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error(b+" is not a valid method in progressforms"):u.init.apply(this,arguments)},a.fn.progressforms.defaults={clickForward:!1,clickBack:!1,clickVisitedOnly:!1,tabs:[],validateRequired:!0,validateRequiredFunctions:{},callbacks:{onInit:function(){},onNext:function(){},onPrev:function(){},onLastTabEntered:function(){},onValidateRequiredFailed:function(a){alert("Please fill out all required fields!"),a.focus()}},ui:{progressBarTarget:"",createNextButton:function(){return a('<button type="button" class="next">').html("Next")},createPrevButton:function(){return a('<button type="button" class="prev">').html("Previous")}}}}(jQuery,window,document);